matrix:
  include:
    - os: linux
      python: 3.5
      language: python
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
      env:
        - PROTOBUF_VERSION=3.4.0
    - os: osx
      language: generic
      env:
        - PROTOBUF_VERSION=3.6.1
install:
  - if [[ $TRAVIS_OS_NAME == 'linux' ]]; then
    export PATH="$PATH:$HOME/bin" ;
    echo "PATH=$PATH";
    fi
  # Install OS-specific dependencies
  - sh "./ci-scripts/install-${TRAVIS_OS_NAME}.sh"
  # Python 3.5.0 on osx
  - if [[ $TRAVIS_OS_NAME == 'osx' ]]; then
    pyenv global 3.5.0;
    pyenv versions;
    python --version;
    fi
  # Upgrade protobuf python
  - pip3 install --upgrade protobuf
  - pip3 install "protobuf==${PROTOBUF_VERSION}" ecdsa
  - pip install --upgrade protobuf
  # Install go
  - eval "$(gimme 1.10)"
script:
  - make all
notifications:
  # https://github.com/kvld/travisci-telegram TravisCI Telegram Bot integration
  webhooks: https://fathomless-fjord-24024.herokuapp.com/notify

